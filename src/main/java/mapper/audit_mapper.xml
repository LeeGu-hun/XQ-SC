<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="auditSQL">

	<select id="auditList" resultType="bean.AuditBean">
		SELECT
		ROWNUM RNUM,
		AU.AUDIT_ID,
		V.VENDOR_NAME,
		AU.AUDIT_PLAN_DATE,
		AU.AUDIT_KIND_ID,
		M.MEMBER_NAME,
		M.MEMBER_ID,
		M.MEMBER_TEL,
		V.VENDOR_Q_NAME,
		V.VENDOR_Q_TEL,
		V.VENDOR_ADDRESS
		FROM
		VENDOR_INFO V,
		PRODUCT_ITEM P,
		AUDIT_INFO AU,
		MEMBER_INFO M
		WHERE M.MEMBER_ID = AU.AUDITOR_ID
		AND
		V.VENDOR_ID = AU.VENDOR_ID
		AND P.PRODUCT_ID = V.PRODUCT_ID

	</select>


	<select id="auditListNotYet" resultType="bean.AuditBean">
		SELECT
		ROWNUM RNUM,
		AU.AUDIT_ID,
		V.VENDOR_NAME,
		AU.AUDIT_PLAN_DATE,
		AU.AUDIT_KIND_ID,
		M.MEMBER_NAME,
		M.MEMBER_ID,
		M.MEMBER_TEL,
		V.VENDOR_Q_NAME,
		V.VENDOR_Q_TEL,
		V.VENDOR_ADDRESS
		FROM
		VENDOR_INFO V,
		PRODUCT_ITEM P,
		AUDIT_INFO AU,
		MEMBER_INFO M
		WHERE M.MEMBER_ID = AU.AUDITOR_ID
		AND
		V.VENDOR_ID = AU.VENDOR_ID
		AND P.PRODUCT_ID = V.PRODUCT_ID
		AND
		AU.AUDIT_PLAN_DATE IS NULL

	</select>

	<!-- 평가 완료 리스트 -->
	<select id="auditListConfirm" resultType="bean.AuditBean">
		SELECT
		ROWNUM RNUM,
		AU.AUDIT_ID,
		V.VENDOR_NAME,
		AU.AUDIT_PLAN_DATE,
		AU.AUDIT_KIND_ID,
		M.MEMBER_NAME,
		M.MEMBER_ID,
		M.MEMBER_TEL,
		V.VENDOR_Q_NAME,
		V.VENDOR_Q_TEL,
		V.VENDOR_ADDRESS
		FROM
		VENDOR_INFO V,
		PRODUCT_ITEM P,
		AUDIT_INFO AU,
		MEMBER_INFO M
		WHERE M.MEMBER_ID = AU.AUDITOR_ID
		AND
		V.VENDOR_ID = AU.VENDOR_ID
		AND P.PRODUCT_ID = V.PRODUCT_ID
		AND
		AU.AUDIT_PLAN_DATE IS NULL
		AND AU.AUDIT_PLAN_DATE IS NOT NULL
	</select>


	<select id="auditListReport" resultType="bean.AuditBean">
		SELECT
		ROWNUM RNUM,
		AU.AUDIT_ID,
		V.VENDOR_NAME,
		V.VENDOR_ID,
		P.PRODUCT_NAME,
		P.PRODUCT_ID,
		Au.AUDIT_PLAN_DATE,
		Au.AUDIT_KIND_ID,
		M. MEMBER_NAME,
		M.MEMBER_ID,
		M.MEMBER_TEL
		FROM
		VENDOR_INFO V,
		PRODUCT_ITEM P,
		AUDIT_INFO AU,
		MEMBER_INFO M
		WHERE M.MEMBER_ID = AU.AUDITOR_ID
		AND V.VENDOR_ID =
		AU.VENDOR_ID
		AND P.PRODUCT_ID = V.PRODUCT_ID
		AND AU.AUDIT_PLAN_DATE IS
		NOT NULL

	</select>

	<!-- 평가 현황 리스트 -->
	<select id="auditResult" resultType="bean.AuditBean">
		SELECT
		ROWNUM RNUM,
		AU.AUDIT_ID,
		V.VENDOR_NAME,
		V.VENDOR_ID,
		P.PRODUCT_NAME,
		P.PRODUCT_ID,
		Au.AUDIT_PLAN_DATE,
		Au.AUDIT_KIND_ID,
		M. MEMBER_NAME,
		M.MEMBER_ID,
		M.MEMBER_TEL,
		AU.AUDIT_SCORE
		FROM
		VENDOR_INFO V,
		PRODUCT_ITEM P,
		AUDIT_INFO AU,
		MEMBER_INFO M
		WHERE M.MEMBER_ID = AU.AUDITOR_ID
		AND
		V.VENDOR_ID = AU.VENDOR_ID
		AND P.PRODUCT_ID = V.PRODUCT_ID
		AND
		AU.AUDIT_PLAN_DATE IS NOT NULL

	</select>


	<!-- 카테고리 리스트 -->
	<select id="cateList" resultType="bean.BeanCategory">
		SELECT * FROM CATEGORY_INFO
		ORDER BY CATEGORY_NAME
	</select>

	<!-- 물품 리스트 -->
	<select id="prodList" resultType="bean.BeanProduct"
		parameterType="String">
		select * from product_item
		where CATEGORY_ID =
		#{CATEGORY_ID}
	</select>


	<select id="selectCount" resultType="int">
		select count(*) from
		AUDIT_INFO
	</select>

	<!-- id 선택시 해당 부분만 보여줌 -->
	<select id="selectAuditID" resultType="bean.AuditBean">
		SELECT
		AU.AUDIT_ID,
		V.VENDOR_NAME,
		V.VENDOR_ID
		FROM
		VENDOR_INFO V,
		PRODUCT_ITEM P,
		AUDIT_INFO AU,
		MEMBER_INFO M,
		CATEGORY_INFO C
		WHERE M.MEMBER_ID = AU.AUDITOR_ID
		AND V.VENDOR_ID = AU.VENDOR_ID
		AND P.PRODUCT_ID = V.PRODUCT_ID
		AND P.CATEGORY_ID = C.CATEGORY_ID
		AND AU.AUDIT_PLAN_DATE IS NOT NULL
		AND AU.AUDIT_ID=
		#{AUDIT_ID}
	</select>


	<select id="selCountNotYet" resultType="int">
		select count(*) from
		AUDIT_INFO where AUDIT_PLAN_DATE is null
	</select>

	<select id="selCountConfirm" resultType="int">
		select
		count(audit_plan_date) from AUDIT_INFO
	</select>
</mapper>

